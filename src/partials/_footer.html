<div id="footer">
  <div class="logo"><a href="#"><img src="https://ps-apps-assets.s3.amazonaws.com/power-of-place/logo.svg" alt="Watershed logo"></a></div>
  <span>This project has been made possible with the support of The Grable Foundation.</span>
  <span>Stories for a better Pittsburgh<br>
  Get our stories by email.</span>
  <button>SIGN UP</button>
</div>


<!-- Typeit plugin code -->
<script>
  $('.type-it').typeIt({
  strings: 'This is a simple string.',
  speed: 88,
  autoStart: false
  });
</script>

<script>
$( function()
{
    var targets = $( '[rel~=tooltip]' ),
        target  = false,
        tooltip = false,
        title   = false;

    targets.bind( 'mouseenter', function()
    {
        target  = $( this );
        tip     = target.attr( 'title' );
        tooltip = $( '<div id="tooltip"></div>' );

        if( !tip || tip == '' )
            return false;

        target.removeAttr( 'title' );
        tooltip.css( 'opacity', 0 )
               .html( tip )
               .appendTo( 'body' );

        var init_tooltip = function()
        {
            if( $( window ).width() < tooltip.outerWidth() * 1.5 )
                tooltip.css( 'max-width', $( window ).width() / 2 );
            else
                tooltip.css( 'max-width', 340 );

            var pos_left = target.offset().left + ( target.outerWidth() / 2 ) - ( tooltip.outerWidth() / 2 ),
                pos_top  = target.offset().top - tooltip.outerHeight() - 20;

            if( pos_left < 0 )
            {
                pos_left = target.offset().left + target.outerWidth() / 2 - 20;
                tooltip.addClass( 'left' );
            }
            else
                tooltip.removeClass( 'left' );

            if( pos_left + tooltip.outerWidth() > $( window ).width() )
            {
                pos_left = target.offset().left - tooltip.outerWidth() + target.outerWidth() / 2 + 20;
                tooltip.addClass( 'right' );
            }
            else
                tooltip.removeClass( 'right' );

            if( pos_top < 0 )
            {
                var pos_top  = target.offset().top + target.outerHeight();
                tooltip.addClass( 'top' );
            }
            else
                tooltip.removeClass( 'top' );

            tooltip.css( { left: pos_left, top: pos_top } )
                   .animate( { top: '+=10', opacity: 1 }, 50 );
        };

        init_tooltip();
        $( window ).resize( init_tooltip );

        var remove_tooltip = function()
        {
            tooltip.animate( { top: '-=10', opacity: 0 }, 50, function()
            {
                $( this ).remove();
            });

            target.attr( 'title', tip );
        };

        target.bind( 'mouseleave', remove_tooltip );
        tooltip.bind( 'click', remove_tooltip );
    });
});
</script>

<script>
readMore( $('.spoiler'), 4);

function readMore(jObj, lineNum) {
if ( isNaN(lineNum) ) {
  lineNum = 4;
}
var go = new ReadMore (jObj, lineNum);
}

//class
function ReadMore(_jObj, lineNum) {
var READ_MORE_LABEL = 'EXPAND';
var HIDE_LABEL = 'MINIMIZE';

var jObj = _jObj;
var textMinHeight = ''+ (parseInt(jObj.children('.hidden-text').css('line-height'),10)*lineNum) +'px';
var textMaxHeight = ''+jObj.children('.hidden-text').css('height');

jObj.children('.hidden-text').css('height', ''+ textMaxHeight);
jObj.children('.hidden-text').css( 'transition', 'height .5s');
jObj.children('.hidden-text').css('height', ''+ textMinHeight);

jObj.append ('<button class="read-more">'+READ_MORE_LABEL+'</button>');

jObj.children('.read-more').click ( function() {
  if (jObj.children('.hidden-text').css('height') === textMinHeight) {
    jObj.children('.hidden-text').css('height', ''+textMaxHeight);
    jObj.children('.read-more').html(HIDE_LABEL).addClass('active');
  } else {
    jObj.children('.hidden-text').css('height', ''+textMinHeight);
    jObj.children('.read-more').html(READ_MORE_LABEL).removeClass('active');
  }
});

}
</script>

<script>
readMore2( $('.spoiler2'), 5);

function readMore2(jObj2, lineNum2) {
if ( isNaN(lineNum2) ) {
  lineNum2 = 5;
}
var go2 = new ReadMore2 (jObj2, lineNum2);
}

//class
function ReadMore2(_jObj2, lineNum2) {
var READ_MORE_LABEL2 = 'EXPAND';
var HIDE_LABEL2 = 'MINIMIZE';

var jObj2 = _jObj2;
var textMinHeight2 = ''+ (parseInt(jObj2.children('.hidden-text2').css('line-height'),10)*lineNum2) +'px';
var textMaxHeight2 = ''+jObj2.children('.hidden-text2').css('height');

jObj2.children('.hidden-text2').css('height', ''+ textMaxHeight2);
jObj2.children('.hidden-text2').css( 'transition', 'height .5s');
jObj2.children('.hidden-text2').css('height', ''+ textMinHeight2);

jObj2.append ('<button class="read-more2">'+READ_MORE_LABEL2+'</button>');

jObj2.children('.read-more2').click ( function() {
  if (jObj2.children('.hidden-text2').css('height') === textMinHeight2) {
    jObj2.children('.hidden-text2').css('height', ''+textMaxHeight2);
    jObj2.children('.read-more2').html(HIDE_LABEL2).addClass('active2');
  } else {
    jObj2.children('.hidden-text2').css('height', ''+textMinHeight2);
    jObj2.children('.read-more2').html(READ_MORE_LABEL2).removeClass('active2');
  }
});

}
</script>

<script>
  $(document).ready(function(){

      var getMax = function(){
          return $(document).height() - $(window).height();
      }

      var getValue = function(){
          return $(window).scrollTop();
      }

      if('max' in document.createElement('progress')){
          // Browser supports progress element
          var progressBar = $('progress');

          // Set the Max attr for the first time
          progressBar.attr({ max: getMax() });

          $(document).on('scroll', function(){
              // On scroll only Value attr needs to be calculated
              progressBar.attr({ value: getValue() });
          });

          $(window).resize(function(){
              // On resize, both Max/Value attr needs to be calculated
              progressBar.attr({ max: getMax(), value: getValue() });
          });
      }
      else {
          var progressBar = $('.progress-bar'),
              max = getMax(),
              value, width;

          var getWidth = function(){
              // Calculate width in percentage
              value = getValue();
              width = (value/max) * 100;
              width = width + '%';
              return width;
          }

          var setWidth = function(){
              progressBar.css({ width: getWidth() });
          }

          $(document).on('scroll', setWidth);
          $(window).on('resize', function(){
              // Need to reset the Max attr
              max = getMax();
              setWidth();
          });
      }
  });


  $(document).ready(function(){

    $('#flat').addClass("active");
    $('#progressBar').addClass('flat');

    $('#flat').on('click', function(){
      $('#progressBar').removeClass().addClass('flat');
      $('a').removeClass();
      $(this).addClass('active');
      $(this).preventDefault();
    });

    $('#single').on('click', function(){
      $('#progressBar').removeClass().addClass('single');
      $('a').removeClass();
      $(this).addClass('active');
      $(this).preventDefault();
    });

    $('#multiple').on('click', function(){
      $('#progressBar').removeClass().addClass('multiple');
      $('a').removeClass();
      $(this).addClass('active');
      $(this).preventDefault();
    });

    $('#semantic').on('click', function(){
      $('#progressBar').removeClass().addClass('semantic');
      $('a').removeClass();
      $(this).addClass('active');
      $(this).preventDefault();
      alert('hello');
    });

    $(document).on('scroll', function(){

        maxAttr = $('#progressBar').attr('max');
        valueAttr = $('#progressBar').attr('value');
        percentage = (valueAttr/maxAttr) * 100;

        if(percentage<49){
          document.styleSheets[0].addRule('.semantic', 'color: red');
          document.styleSheets[0].addRule('.semantic::-webkit-progress-value', 'background-color: red');
          document.styleSheets[0].addRule('.semantic::-moz-progress-bar', 'background-color: red');
        }
        else if(percentage<98){
          document.styleSheets[0].addRule('.semantic', 'color: orange');
          document.styleSheets[0].addRule('.semantic::-webkit-progress-value', 'background-color: orange');
          document.styleSheets[0].addRule('.semantic::-moz-progress-bar', 'background-color: orange');
        }
        else {
          document.styleSheets[0].addRule('.semantic', 'color: green');
          document.styleSheets[0].addRule('.semantic::-webkit-progress-value', 'background-color: green');
          document.styleSheets[0].addRule('.semantic::-moz-progress-bar', 'background-color: green');
        }
    });

  });
</script>
